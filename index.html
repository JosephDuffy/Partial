<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Partial  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="Partial  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">Partial Docs</a> (100% documented)</p>
        <p class="header-right"><a href="https://github.com/JosephDuffy/Partial"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">Partial Reference</a>
        <img id="carat" src="img/carat.png" />
        Partial  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/PartialBuilder.html">PartialBuilder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PartialBuilder/KeyPathUpdate.html">– KeyPathUpdate</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Subscription.html">Subscription</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/PartialConvertible.html">PartialConvertible</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/PartialProtocol.html">PartialProtocol</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Partial.html">Partial</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Partial/Error.html">– Error</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='partial' class='heading'>Partial</h1>

<p><a href="https://travis-ci.com/JosephDuffy/Partial"><img src="https://api.travis-ci.com/JosephDuffy/Partial.svg" alt="Build Status"></a>
<a href="https://josephduffy.github.io/Partial/"><img src="https://josephduffy.github.io/Partial/badge.svg" alt="Documentation"></a>
<img src="https://img.shields.io/badge/platforms-macOS%20%7C%20iOS%20%7C%20watchOS%20%7C%20tvOS%20%7C%20Linux-4BC51D.svg" alt="Compatible with macOS, iOS, watchOS, tvOS, and Linux">
<a href="https://github.com/apple/swift-package-manager"><img src="https://img.shields.io/badge/SwiftPM-compatible-4BC51D.svg?style=flat" alt="SwiftPM Compatible"></a>
<a href="https://github.com/Carthage/Carthage"><img src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat" alt="Carthage Compatible"></a>
<a href="https://cocoapods.org/pods/Partial"><img src="https://img.shields.io/badge/CocoaPods-compatible-4BC51D.svg?style=flat" alt="CocoaPods Compatible"></a>
<a href="./LICENSE"><img src="https://img.shields.io/badge/License-MIT-4BC51D.svg?style=flat" alt="MIT License"></a></p>

<p>Partial is a type-safe wrapper that mirrors the properties of the wrapped type but makes each property optional.</p>
<pre class="highlight swift"><code><span class="k">var</span> <span class="nv">partialSize</span> <span class="o">=</span> <span class="kt">Partial</span><span class="o">&lt;</span><span class="kt">CGSize</span><span class="o">&gt;</span><span class="p">()</span>

<span class="n">partialSize</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">6016</span>
<span class="n">partialSize</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">3384</span>
<span class="k">try</span> <span class="kt">CGSize</span><span class="p">(</span><span class="nv">partial</span><span class="p">:</span> <span class="n">partialSize</span><span class="p">)</span> <span class="c1">// `CGSize(width: 6016, height: 3384)`</span>

<span class="n">partialSize</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="kc">nil</span>
<span class="k">try</span> <span class="kt">CGSize</span><span class="p">(</span><span class="nv">partial</span><span class="p">:</span> <span class="n">partialSize</span><span class="p">)</span> <span class="c1">// Throws `Partial&lt;CGSize&gt;.Error&lt;CGFloat&gt;.keyPathNotSet(\.height)`</span>
</code></pre>

<p>⚠️️ Dynamic member lookup requires Swift 5.1, which is currently in beta. If you are using Swift 5.0 please substitute dynamic member lookup for the subscript ⚠️</p>
<pre class="highlight swift"><code><span class="c1">// Requires Swift 5.1</span>
<span class="n">partialSize</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">6016</span>

<span class="c1">// Compatible with Swift 5.0</span>
<span class="n">partialSize</span><span class="p">[\</span><span class="o">.</span><span class="n">width</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6016</span>
</code></pre>
<h1 id='documentation' class='heading'>Documentation</h1>

<p>Partial is fully documented, with <a href="https://josephduffy.github.io/Partial/">code-level documentation available online</a>. The online documentation is generated from the source code with every release, so it is up-to-date with the latest release, but may be different to the code in <code>master</code>.</p>
<h2 id='usage-overview' class='heading'>Usage overview</h2>

<p>Partial has a <code>KeyPath</code>-based API, allowing it to be fully type-safe. Setting, retrieving, and removing key paths is possible via dynamic member lookup or functions.</p>
<pre class="highlight swift"><code><span class="k">var</span> <span class="nv">partialSize</span> <span class="o">=</span> <span class="kt">Partial</span><span class="o">&lt;</span><span class="kt">CGSize</span><span class="o">&gt;</span><span class="p">()</span>

<span class="c1">// Set key paths</span>
<span class="n">partialSize</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">6016</span>
<span class="n">partialSize</span><span class="o">.</span><span class="nf">setValue</span><span class="p">(</span><span class="mi">3384</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>

<span class="c1">// Retrieve key paths</span>
<span class="n">partialSize</span><span class="o">.</span><span class="n">width</span> <span class="c1">// `Optional&lt;CGFloat&gt;(6016)`</span>
<span class="k">try</span> <span class="n">partialSize</span><span class="o">.</span><span class="nf">value</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">height</span><span class="p">)</span> <span class="c1">// `3384`</span>

<span class="c1">// Remove key paths</span>
<span class="n">partialSize</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="kc">nil</span>
<span class="n">partialSize</span><span class="o">.</span><span class="nf">removeValue</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
</code></pre>
<h2 id='key-path-considerations' class='heading'>Key path considerations</h2>

<p>Key paths in Swift are very powerful, but by being so powerful they create a couple of caveats with the usage of partial.</p>

<p>In general <strong>I highly recommend you do not use key paths to a property of a property</strong>. The reason for this is 2 fold:</p>

<ul>
<li>It creates ambiguity when unwrapping a partial</li>
<li>Dynamic member lookup does not support key paths to a property of a property</li>
</ul>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">SizeWrapper</span><span class="p">:</span> <span class="kt">PartialConvertible</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">size</span><span class="p">:</span> <span class="kt">CGSize</span>

    <span class="kd">init</span><span class="o">&lt;</span><span class="kt">PartialType</span><span class="p">:</span> <span class="kt">PartialProtocol</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">partial</span><span class="p">:</span> <span class="kt">PartialType</span><span class="p">)</span> <span class="k">throws</span> <span class="k">where</span> <span class="kt">PartialType</span><span class="o">.</span><span class="kt">Wrapped</span> <span class="o">==</span> <span class="kt">SizeWrapper</span> <span class="p">{</span>
        <span class="c1">// Should unwrap `size` directly...</span>
        <span class="n">size</span> <span class="o">=</span> <span class="k">try</span> <span class="n">partial</span><span class="o">.</span><span class="nf">value</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="c1">// ... or unwrap each property of `size`?</span>
        <span class="k">let</span> <span class="nv">width</span> <span class="o">=</span> <span class="k">try</span> <span class="n">partial</span><span class="o">.</span><span class="nf">value</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
        <span class="k">let</span> <span class="nv">height</span> <span class="o">=</span> <span class="k">try</span> <span class="n">partial</span><span class="o">.</span><span class="nf">value</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
        <span class="n">size</span> <span class="o">=</span> <span class="kt">CGSize</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="n">width</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="n">height</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">var</span> <span class="nv">sizeWrapperPartial</span> <span class="o">=</span> <span class="kt">Partial</span><span class="o">&lt;</span><span class="kt">SizeWrapper</span><span class="o">&gt;</span><span class="p">()</span>
<span class="n">sizeWrapperPartial</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="mi">6016</span> <span class="c1">// This is not possible</span>
</code></pre>
<h2 id='building-complex-types' class='heading'>Building complex types</h2>

<p>Since <code><a href="Structs/Partial.html">Partial</a></code> is a value type it is not suitable for being passed between multiple pieces of code. To allow for a single instance of a type to be constructed the <code><a href="Classes/PartialBuilder.html">PartialBuilder</a></code> class is provided, which also provides the ability to subscribe to updates.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">sizeBuilder</span> <span class="o">=</span> <span class="kt">PartialBuilder</span><span class="o">&lt;</span><span class="kt">CGSize</span><span class="o">&gt;</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">allChangesSubscription</span> <span class="o">=</span> <span class="n">sizeBuilder</span><span class="o">.</span><span class="n">subscribeToAllChanges</span> <span class="p">{</span> <span class="p">(</span><span class="nv">keyPath</span><span class="p">:</span> <span class="kt">PartialKeyPath</span><span class="o">&lt;</span><span class="kt">CGSize</span><span class="o">&gt;</span><span class="p">,</span> <span class="nv">builder</span><span class="p">:</span> <span class="kt">PartialBuilder</span><span class="o">&lt;</span><span class="kt">CGSize</span><span class="o">&gt;</span><span class="p">)</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"</span><span class="se">\(</span><span class="n">keyPath</span><span class="se">)</span><span class="s"> was updated"</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">var</span> <span class="nv">widthSubscription</span> <span class="o">=</span> <span class="n">sizeBuilder</span><span class="o">.</span><span class="nf">subscribeForChanges</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">width</span><span class="p">)</span> <span class="p">{</span> <span class="n">update</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"width has been updated from </span><span class="se">\(</span><span class="n">update</span><span class="o">.</span><span class="n">oldValue</span><span class="se">)</span><span class="s"> to </span><span class="se">\(</span><span class="n">update</span><span class="o">.</span><span class="n">newValue</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Notifies both subscribers</span>
<span class="n">partial</span><span class="p">[\</span><span class="o">.</span><span class="n">width</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6016</span>

<span class="c1">// Notifies the all changes subscriber</span>
<span class="n">partial</span><span class="p">[\</span><span class="o">.</span><span class="n">height</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3384</span>

<span class="c1">// Subscriptions can be manually cancelled</span>
<span class="n">allChangesSubscription</span><span class="o">.</span><span class="nf">cancel</span><span class="p">()</span>
<span class="c1">// Notifies the width subscriber</span>
<span class="n">partial</span><span class="p">[\</span><span class="o">.</span><span class="n">width</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6016</span>

<span class="c1">// Subscriptions will be cancelled when deallocated</span>
<span class="n">widthSubscription</span> <span class="o">=</span> <span class="kc">nil</span>
<span class="c1">// Does not notify any subscribers</span>
<span class="n">partial</span><span class="p">[\</span><span class="o">.</span><span class="n">width</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6016</span>
</code></pre>

<p>When building a more complex type I recommend using a builder per-property and using the builders to set the key paths on the root builder:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">Root</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">size1</span><span class="p">:</span> <span class="kt">CGSize</span>
    <span class="k">let</span> <span class="nv">size2</span><span class="p">:</span> <span class="kt">CGSize</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">rootBuilder</span> <span class="o">=</span> <span class="kt">PartialBuilder</span><span class="o">&lt;</span><span class="kt">Root</span><span class="o">&gt;</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">size1Builder</span> <span class="o">=</span> <span class="kt">PartialBuilder</span><span class="o">&lt;</span><span class="kt">CGSize</span><span class="o">&gt;</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">size2Builder</span> <span class="o">=</span> <span class="kt">PartialBuilder</span><span class="o">&lt;</span><span class="kt">CGSize</span><span class="o">&gt;</span><span class="p">()</span>

<span class="k">let</span> <span class="nv">size1Subscription</span> <span class="o">=</span> <span class="n">size1Builder</span><span class="o">.</span><span class="n">subscribeToAllChanges</span> <span class="p">{</span> <span class="n">_</span><span class="p">,</span> <span class="n">size1Builder</span> <span class="k">in</span>
    <span class="k">try</span><span class="p">?</span> <span class="n">rootBuilder</span><span class="o">.</span><span class="nf">setValue</span><span class="p">(</span><span class="n">size1Builder</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">size1</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">let</span> <span class="nv">size2Subscription</span> <span class="o">=</span> <span class="n">size2Builder</span><span class="o">.</span><span class="n">subscribeToAllChanges</span> <span class="p">{</span> <span class="n">_</span><span class="p">,</span> <span class="n">size2Builder</span> <span class="k">in</span>
    <span class="k">try</span><span class="p">?</span> <span class="n">rootBuilder</span><span class="o">.</span><span class="nf">setValue</span><span class="p">(</span><span class="n">size2Builder</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">size2</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h2 id='dealing-with-code-optional-code-s' class='heading'>Dealing with <code>Optional</code>s</h2>

<p>Partials mirror the properties of the wrapping type exactly, meaning that optional properties will still be optional. This isn&rsquo;t much of a problem with the <code>value(for:)</code> and <code>setValue(_:for:)</code> functions, but can be a bit more cumbersome when using dynamic member lookup because the optional will be wrapped in another optional.</p>

<p>These examples will use a type that has an optional property:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">Foo</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">bar</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
<span class="p">}</span>
<span class="k">var</span> <span class="nv">fooPartial</span> <span class="o">=</span> <span class="kt">Partial</span><span class="o">&lt;</span><span class="kt">Foo</span><span class="o">&gt;</span><span class="p">()</span>
</code></pre>

<p>Setting and retrieving optional values with the <code>setValue(_:for:)</code> and <code>value(for:)</code> functions does not require anything special:</p>
<pre class="highlight swift"><code><span class="k">try</span> <span class="n">fooPartial</span><span class="o">.</span><span class="nf">value</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span> <span class="c1">// Throws `Partial&lt;Foo&gt;.Error&lt;String?&gt;.keyPathNotSet(\.bar)`</span>
<span class="n">fooPartial</span><span class="o">.</span><span class="nf">setValue</span><span class="p">(</span><span class="kc">nil</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span>
<span class="k">try</span> <span class="n">fooPartial</span><span class="o">.</span><span class="nf">value</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span> <span class="c1">// Returns `String?.none`</span>
</code></pre>

<p>However using dynamic member lookup requires a little more consideration:</p>
<pre class="highlight swift"><code><span class="n">fooPartial</span><span class="o">.</span><span class="n">bar</span> <span class="o">=</span> <span class="kt">String</span><span class="p">?</span><span class="o">.</span><span class="k">none</span> <span class="c1">// Sets the value to `nil`</span>
<span class="n">fooPartial</span><span class="o">.</span><span class="n">bar</span> <span class="o">=</span> <span class="kc">nil</span> <span class="c1">// Removes the value. Equivalent to setting to `String??.none`</span>
</code></pre>

<p>When retrieving values it can be necessary to unwrap the value twice:</p>
<pre class="highlight swift"><code><span class="k">if</span> <span class="k">let</span> <span class="nv">setValue</span> <span class="o">=</span> <span class="n">fooPartial</span><span class="o">.</span><span class="n">bar</span> <span class="p">{</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">unwrapped</span> <span class="o">=</span> <span class="n">setValue</span> <span class="p">{</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"`bar` has been set to"</span><span class="p">,</span> <span class="n">unwrapped</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"`bar` has been set to `nil`"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"`bar` has not been set"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h2 id='adding-support-to-your-own-types' class='heading'>Adding support to your own types</h2>

<p>Adopting the <code><a href="Protocols/PartialConvertible.html">PartialConvertible</a></code> protocol declares that a type can be initialised with a partial:</p>
<pre class="highlight swift"><code><span class="kd">protocol</span> <span class="kt">PartialConvertible</span> <span class="p">{</span>
    <span class="kd">init</span><span class="o">&lt;</span><span class="kt">PartialType</span><span class="p">:</span> <span class="kt">PartialProtocol</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">partial</span><span class="p">:</span> <span class="kt">PartialType</span><span class="p">)</span> <span class="k">throws</span> <span class="k">where</span> <span class="kt">PartialType</span><span class="o">.</span><span class="kt">Wrapped</span> <span class="o">==</span> <span class="k">Self</span>
<span class="p">}</span>
</code></pre>

<p>The <code>value(for:)</code> function will throw an error if the key path has not been set, which can be useful when adding conformance. For example, to add <code><a href="Protocols/PartialConvertible.html">PartialConvertible</a></code> conformance to <code>CGSize</code> you could use <code>value(for:)</code> to retrieve the <code>width</code> and <code>height</code> values:</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">CGSize</span><span class="p">:</span> <span class="kt">PartialConvertible</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">init</span><span class="o">&lt;</span><span class="kt">PartialType</span><span class="p">:</span> <span class="kt">PartialProtocol</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">partial</span><span class="p">:</span> <span class="kt">PartialType</span><span class="p">)</span> <span class="k">throws</span> <span class="k">where</span> <span class="kt">PartialType</span><span class="o">.</span><span class="kt">Wrapped</span> <span class="o">==</span> <span class="kt">CGSize</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">width</span> <span class="o">=</span> <span class="k">try</span> <span class="n">partial</span><span class="o">.</span><span class="nf">value</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
        <span class="k">let</span> <span class="nv">height</span> <span class="o">=</span> <span class="k">try</span> <span class="n">partial</span><span class="o">.</span><span class="nf">value</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">width</span><span class="p">:</span> <span class="n">width</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="n">height</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>As a convenience it&rsquo;s then possible to unwrap partials that wrap a type that conforms to <code><a href="Protocols/PartialConvertible.html">PartialConvertible</a></code>:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">sizeBuilder</span> <span class="o">=</span> <span class="kt">PartialBuilder</span><span class="o">&lt;</span><span class="kt">CGSize</span><span class="o">&gt;</span><span class="p">()</span>
<span class="c1">// ...</span>
<span class="k">let</span> <span class="nv">size</span> <span class="o">=</span> <span class="k">try!</span> <span class="n">sizeBuilder</span><span class="o">.</span><span class="nf">unwrapped</span><span class="p">()</span>
</code></pre>

<p>It is also possible to set a key path to a partial value. If the unwrapping fails the key path will not be updated and the error will be thrown:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">Foo</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">size</span><span class="p">:</span> <span class="kt">CGSize</span>
<span class="p">}</span>

<span class="k">var</span> <span class="nv">partialFoo</span> <span class="o">=</span> <span class="kt">Partial</span><span class="o">&lt;</span><span class="kt">Foo</span><span class="o">&gt;</span><span class="p">()</span>
<span class="k">var</span> <span class="nv">partialSize</span> <span class="o">=</span> <span class="kt">Partial</span><span class="o">&lt;</span><span class="kt">CGSize</span><span class="o">&gt;</span><span class="p">()</span>

<span class="n">partialSize</span><span class="p">[\</span><span class="o">.</span><span class="n">width</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6016</span>
<span class="k">try</span> <span class="n">partialFoo</span><span class="o">.</span><span class="nf">setValue</span><span class="p">(</span><span class="n">partialSize</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="c1">// Throws `Partial&lt;CGSize&gt;.Error.keyPathNotSet(\.height)`</span>

<span class="n">partialSize</span><span class="p">[\</span><span class="o">.</span><span class="n">height</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3384</span>
<span class="k">try</span> <span class="n">partialFoo</span><span class="o">.</span><span class="nf">setValue</span><span class="p">(</span><span class="n">partialSize</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="p">\</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="c1">// Sets `size` to `CGSize(width: 6016, height: 3384)`</span>
</code></pre>
<h1 id='tests-and-ci' class='heading'>Tests and CI</h1>

<p>Partial has a full test suite, which is run on <a href="https://travis-ci.com/JosephDuffy/Partial">Travis CI</a> as part of pull requests. All tests must pass for a pull request to be merged.</p>

<p>Code coverage is collected and reported to to <a href="https://codecov.io/gh/JosephDuffy/Partial">Codecov</a>. 100% coverage is not possible; some lines of code should never be hit but are required for type-safety, and Swift does not track <code>deinit</code> functions as part of coverage. These limitations will be considered when reviewing a pull request that lowers the overall code coverage.</p>
<h1 id='installation' class='heading'>Installation</h1>
<h2 id='swiftpm' class='heading'>SwiftPM</h2>

<p>To install via <a href="https://github.com/apple/swift-package-manager">SwiftPM</a> add the package to the dependencies section and as the dependency of a target:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">package</span> <span class="o">=</span> <span class="kt">Package</span><span class="p">(</span>
    <span class="o">...</span>
    <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/JosephDuffy/Partial.git"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"1.0.0"</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="nv">targets</span><span class="p">:</span> <span class="p">[</span>
        <span class="o">.</span><span class="nf">target</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"MyApp"</span><span class="p">,</span> <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span><span class="s">"Partial"</span><span class="p">]),</span>
    <span class="p">],</span>
    <span class="o">...</span>
<span class="p">)</span>
</code></pre>
<h2 id='carthage' class='heading'>Carthage</h2>

<p>To install via <a href="https://github.com/Carthage/Carthage">Carthage</a> add to following to your <code>Cartfile</code>:</p>
<pre class="highlight plaintext"><code>github "JosephDuffy/Partial"
</code></pre>

<p>Run <code>carthage update Partial</code> to build the framework and then drag the built framework file in to your Xcode project. Partial provides pre-compiled binaries, <a href="https://github.com/Carthage/Carthage#dwarfs-symbol-problem">which can cause some issues with symbols</a>. Use the <code>--no-use-binaries</code> flag if this is an issue.</p>

<p>Remember to <a href="https://github.com/Carthage/Carthage#if-youre-building-for-ios-tvos-or-watchos">add Partial to your Carthage build phase</a>:</p>
<pre class="highlight plaintext"><code>$(SRCROOT)/Carthage/Build/iOS/Partial.framework
</code></pre>

<p>and</p>
<pre class="highlight plaintext"><code>$(BUILT_PRODUCTS_DIR)/$(FRAMEWORKS_FOLDER_PATH)/Partial.framework
</code></pre>
<h2 id='cocoapods' class='heading'>CocoaPods</h2>

<p>To install via <a href="https://cocoapods.org">CocoaPods</a> add the following to your Podfile:</p>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s1">'Partial'</span>
</code></pre>

<p>and then run <code>pod install</code>.</p>
<h1 id='license' class='heading'>License</h1>

<p>The project is released under the MIT license. View the <a href="./LICENSE">LICENSE</a> file for the full license.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2019 <a class="link" href="https://github.com/JosephDuffy/Partial" target="_blank" rel="external">Joseph Duffy</a>. All rights reserved. (Last updated: 2019-07-10)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.10.0</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
